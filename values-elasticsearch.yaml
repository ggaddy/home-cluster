# helm upgrade --install elasticsearch elastic/elasticsearch -n elastic -f values-elasticsearch.yaml
replicas: 1
minimumMasterNodes: 1

antiAffinity: "soft"

# k3s local-path storage
volumeClaimTemplate:
  accessModes: ["ReadWriteOnce"]
  storageClassName: local-path
  resources:
    requests:
      storage: 30Gi

resources:
  requests:
    cpu: "250m"
    memory: "1Gi"
  limits:
    memory: "2Gi"

esJavaOpts: "-Xms1g -Xmx1g"

# Leave chart defaults: security+TLS enabled (protocol https, createCert true, secret.enabled true)
protocol: https
createCert: true
secret:
  enabled: true

# Avoid discovery.type single-node to prevent conflict with cluster.initial_master_nodes
esConfig:
  elasticsearch.yml: |
    xpack.security.enabled: true
    xpack.security.enrollment.enabled: false
